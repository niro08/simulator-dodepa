<template>
  <section class="panel friend">
    <header>
      <h2>–î—Ä—É–∑—å—è</h2>
      <p class="muted">–î—Ä—É–∑—å—è –Ω–µ –±–∞–Ω–∫ - –∑–∞–Ω—è–ª –∏ –º–æ–∂–Ω–æ –Ω–µ –æ—Ç–¥–∞–≤–∞—Ç—å</p>
    </header>
    <p>‚ö° –≠–Ω–µ—Ä–≥–∏—è: {{ energy }} | ‚ù§Ô∏è –†–µ–ø—É—Ç–∞—Ü–∏—è: {{ reputation }}</p>
    <div class="button-with-warning">
      <button @click="$emit('borrow-money')" :disabled="reputation <= 0 || energy < BORROW_COST">
        ü§ù –ó–∞–Ω—è—Ç—å —É –¥—Ä—É–≥–∞ (-{{ BORROW_COST }}‚ö°, -1‚ù§Ô∏è)
      </button>
      <div class="warnings-container">
        <p v-if="reputation <= 0" class="warning-text">‚ö†Ô∏è –¢–µ–±–µ –±–æ–ª—å—à–µ –Ω–∏–∫—Ç–æ –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç</p>
        <p v-if="energy < BORROW_COST" class="warning-text">‚ö†Ô∏è –ù–µ—Ç —Å–∏–ª –≤—ã–ø—Ä–æ—Å–∏—Ç—å –¥–µ–Ω—å–≥–∏</p>
        <p v-if="reputation > 0 && energy >= BORROW_COST" class="warning-text-placeholder">&nbsp;</p>
      </div>
    </div>

    <div class="button-with-warning">
      <button @click="$emit('help-friend')" :disabled="energy < HELP_COST">
        ‚ú® –ü–æ–º–æ—á—å –¥—Ä—É–≥—É (-{{ HELP_COST }}‚ö°, +1‚ù§Ô∏è)
      </button>
      <p v-if="energy < HELP_COST" class="warning-text">‚ö†Ô∏è –ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å</p>
      <p v-else class="warning-text-placeholder">&nbsp;</p>
    </div>
  </section>
</template>

<script setup lang="ts">
defineProps<{ energy: number; reputation: number }>()

const BORROW_COST = 5
const HELP_COST = 5
</script>

<style scoped>
.panel.friend {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.panel.friend > p {
  padding: 0.5rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 0.5rem;
  text-align: center;
  font-weight: 600;
}

.button-with-warning {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.button-with-warning button {
  width: 100%;
}

.warnings-container {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.warning-text {
  color: #f59e0b;
  font-size: 0.875rem;
  margin: 0;
  text-align: center;
  font-weight: 600;
  padding: 0.25rem;
  min-height: 1.5rem;
}

.warning-text-placeholder {
  min-height: 1.5rem;
  margin: 0;
  padding: 0.25rem;
}
</style>
